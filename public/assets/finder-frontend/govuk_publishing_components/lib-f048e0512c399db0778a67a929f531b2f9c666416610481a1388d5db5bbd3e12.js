function nodeListForEach(t,e){if(window.NodeList.prototype.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e.call(window,t[n],n,t)}this.Element&&function(t){t.matches=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.msMatchesSelector||function(t){for(var e=this,n=(e.parentNode||e.document).querySelectorAll(t),o=-1;n[++o]&&n[o]!=e;);return!!n[o]}}(Element.prototype),this.Element&&function(t){t.closest=t.closest||function(t){for(var e=this;e.matches&&!e.matches(t);)e=e.parentNode;return e.matches?e:null}}(Element.prototype),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var n=e||0,o=this.length;n<o;n++)if(this[n]===t)return n;return-1}),function(){"use strict";window.GOVUK=window.GOVUK||{};var i={essential:!0,settings:!1,usage:!1,campaigns:!1},s={cookies_policy:"essential",seen_cookie_message:"essential",cookie_preferences_set:"essential",cookies_preferences_set:"essential","_email-alert-frontend_session":"essential",licensing_session:"essential",govuk_contact_referrer:"essential",multivariatetest_cohort_coronavirus_extremely_vulnerable_rate_limit:"essential",dgu_beta_banner_dismissed:"settings",global_bar_seen:"settings",govuk_browser_upgrade_dismisssed:"settings",govuk_not_first_visit:"settings",analytics_next_page_call:"usage",user_nation:"settings",_ga:"usage",_gid:"usage",_gat:"usage","JS-Detection":"usage",TLSversion:"usage",_ga_VBLT2V3FZR:"usage",_ga_P1DGM6TVYF:"usage",_ga_S5RQ7FTGVR:"usage"};window.GOVUK.cookie=function(t,e,n){return void 0!==e?!1===e||null===e?window.GOVUK.setCookie(t,"",{days:-1}):(void 0===n&&(n={days:30}),window.GOVUK.setCookie(t,e,n)):window.GOVUK.getCookie(t)},window.GOVUK.setDefaultConsentCookie=function(){window.GOVUK.setConsentCookie(i)},window.GOVUK.approveAllCookieTypes=function(){var t={essential:!0,settings:!0,usage:!0,campaigns:!0};window.GOVUK.setCookie("cookies_policy",JSON.stringify(t),{days:365})},window.GOVUK.getConsentCookie=function(){var t,e=window.GOVUK.cookie("cookies_policy");if(!e)return null;try{t=JSON.parse(e)}catch(n){return null}return"object"!=typeof t&&null!==t&&(t=JSON.parse(t)),t},window.GOVUK.setConsentCookie=function(t){var e=window.GOVUK.getConsentCookie();for(var n in e||(e=JSON.parse(JSON.stringify(i))),t)if(e[n]=t[n],!t[n])for(var o in s)s[o]===n&&window.GOVUK.deleteCookie(o);window.GOVUK.setCookie("cookies_policy",JSON.stringify(e),{days:365})},window.GOVUK.checkConsentCookieCategory=function(t,e){var n=window.GOVUK.getConsentCookie();if(!n&&s[t])return!0;n=window.GOVUK.getConsentCookie();try{return n[e]}catch(o){return console.error(o),!1}},window.GOVUK.checkConsentCookie=function(t,e){if("cookies_policy"===t||null===e||!1===e)return!0;if(t.match("^govuk_surveySeen")||t.match("^govuk_taken"))return window.GOVUK.checkConsentCookieCategory(t,"settings");if(s[t]){var n=s[t];return window.GOVUK.checkConsentCookieCategory(t,n)}return!1},window.GOVUK.setCookie=function(t,e,n){if(window.GOVUK.checkConsentCookie(t,e)){void 0===n&&(n={});var o=t+"="+e+"; path=/";if(n.days){var i=new Date;i.setTime(i.getTime()+24*n.days*60*60*1e3),o=o+"; expires="+i.toGMTString()}"https:"===document.location.protocol&&(o+="; Secure"),document.cookie=o}},window.GOVUK.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0,i=n.length;o<i;o++){for(var s=n[o];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return decodeURIComponent(s.substring(e.length))}return null},window.GOVUK.getCookieCategory=function(t){return s[t]},window.GOVUK.deleteCookie=function(t){window.GOVUK.cookie(t,null),window.GOVUK.cookie(t)&&(document.cookie=t+"=;expires="+new Date+";",document.cookie=t+"=;expires="+new Date+";domain="+window.location.hostname+";path=/")},window.GOVUK.deleteUnconsentedCookies=function(){var t=window.GOVUK.getConsentCookie();for(var e in t)if(!t[e])for(var n in s)s[n]===e&&window.GOVUK.deleteCookie(n)}}(window),function(t){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.getCurrentLocation=function(){return t.location}}(window),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.extendObject=function(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}}(window),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define("GOVUKFrontend",e):e()}(0,function(){"use strict";(function(){var a,l,c,d;"defineProperty"in Object&&function(){try{var t={};return Object.defineProperty(t,"test",{value:42}),!0}catch(e){return!1}}()||(a=Object.defineProperty,l=Object.prototype.hasOwnProperty("__defineGetter__"),c="Getters & setters cannot be defined on this javascript engine",d="A property cannot both have accessors and be writable or have a value",Object.defineProperty=function u(t,e,n){if(a&&(t===window||t===document||t===Element.prototype||t instanceof Element))return a(t,e,n);if(null===t||!(t instanceof Object||"object"==typeof t))throw new TypeError("Object.defineProperty called on non-object");if(!(n instanceof Object))throw new TypeError("Property description must be an object");var o=String(e),i="value"in n||"writable"in n,s="get"in n&&typeof n.get,r="set"in n&&typeof n.set;if(s){if("function"!==s)throw new TypeError("Getter must be a function");if(!l)throw new TypeError(c);if(i)throw new TypeError(d);Object.__defineGetter__.call(t,o,n.get)}else t[o]=n.value;if(r){if("function"!==r)throw new TypeError("Setter must be a function");if(!l)throw new TypeError(c);if(i)throw new TypeError(d);Object.__defineSetter__.call(t,o,n.set)}return"value"in n&&(t[o]=n.value),t})}).call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(h){var t,e,n;"DOMTokenList"in this&&(!("classList"in(t=document.createElement("x")))||!t.classList.toggle("x",!1)&&!t.className)||("DOMTokenList"in(e=this)&&e.DOMTokenList&&(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg")||document.createElementNS("http://www.w3.org/2000/svg","svg").classList instanceof DOMTokenList)||(e.DOMTokenList=function(){var i=!0,n=function(t,e,n,o){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===i||!!o,get:n}):t.__defineGetter__(e,n)};try{n({},"support")}catch(t){i=!1}return function(i,s){var r=this,a=[],l={},c=0,t=0,e=function(t){n(r,t,function(){return u(),a[t]},!1)},d=function(){if(t<=c)for(;t<c;++t)e(t)},u=function(){var t,e,n=arguments,o=/\s+/;if(n.length)for(e=0;e<n.length;++e)if(o.test(n[e]))throw(t=new SyntaxError('String "'+n[e]+'" contains an invalid character')).code=5,t.name="InvalidCharacterError",t;for(""===(a="object"==typeof i[s]?(""+i[s].baseVal).replace(/^\s+|\s+$/g,"").split(o):(""+i[s]).replace(/^\s+|\s+$/g,"").split(o))[0]&&(a=[]),l={},e=0;e<a.length;++e)l[a[e]]=!0;c=a.length,d()};return u(),n(r,"length",function(){return u(),c}),r.toLocaleString=r.toString=function(){return u(),a.join(" ")},r.item=function(t){return u(),a[t]},r.contains=function(t){return u(),!!l[t]},r.add=function(){u.apply(r,t=arguments);for(var t,e,n=0,o=t.length;n<o;++n)e=t[n],l[e]||(a.push(e),l[e]=!0);c!==a.length&&(c=a.length>>>0,"object"==typeof i[s]?i[s].baseVal=a.join(" "):i[s]=a.join(" "),d())},r.remove=function(){u.apply(r,t=arguments);for(var t,e={},n=0,o=[];n<t.length;++n)e[t[n]]=!0,delete l[t[n]];for(n=0;n<a.length;++n)e[a[n]]||o.push(a[n]);c=(a=o).length>>>0,"object"==typeof i[s]?i[s].baseVal=a.join(" "):i[s]=a.join(" "),d()},r.toggle=function(t,e){return u.apply(r,[t]),h!==e?e?(r.add(t),!0):(r.remove(t),!1):l[t]?(r.remove(t),!1):(r.add(t),!0)},r}}()),"classList"in(n=document.createElement("span"))&&(n.classList.toggle("x",!1),n.classList.contains("x")&&(n.classList.constructor.prototype.toggle=function i(t,e){var n=e;if(n!==h)return this[(n=!!n)?"add":"remove"](t),n;var o=!this.contains(t);return this[o?"add":"remove"](t),o})),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a","b"),!t.classList.contains("b"))){var o=t.classList.constructor.prototype.add;t.classList.constructor.prototype.add=function(){for(var t=arguments,e=arguments.length,n=0;n<e;n++)o.call(this,t[n])}}}(),function(){var t=document.createElement("span");if("classList"in t&&(t.classList.add("a"),t.classList.add("b"),t.classList.remove("a","b"),t.classList.contains("b"))){var o=t.classList.constructor.prototype.remove;t.classList.constructor.prototype.remove=function(){for(var t=arguments,e=arguments.length,n=0;n<e;n++)o.call(this,t[n])}}}())}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"Document"in this||"undefined"==typeof WorkerGlobalScope&&"function"!=typeof importScripts&&(this.HTMLDocument?this.Document=this.HTMLDocument:(this.Document=this.HTMLDocument=document.constructor=new Function("return function Document() {}")(),this.Document.prototype=document))}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){"Element"in this&&"HTMLElement"in this||function(){function t(){return s--||clearTimeout(e),!(!document.body||document.body.prototype||!/(complete|interactive)/.test(document.readyState))&&(c(document,!0),e&&document.body.prototype&&clearTimeout(e),!!document.body.prototype)}if(!window.Element||window.HTMLElement){window.Element=window.HTMLElement=new Function("return function Element() {}")();var e,n=document.appendChild(document.createElement("body")),o=n.appendChild(document.createElement("iframe")).contentWindow.document,a=Element.prototype=o.appendChild(o.createElement("*")),l={},c=function(t,e){var n,o,i,s=t.childNodes||[],r=-1;if(1===t.nodeType&&t.constructor!==Element)for(n in t.constructor=Element,l)o=l[n],t[n]=o;for(;i=e&&s[++r];)c(i,e);return t},d=document.getElementsByTagName("*"),i=document.createElement,s=100;a.attachEvent("onpropertychange",function(t){for(var e,n=t.propertyName,o=!l.hasOwnProperty(n),i=a[n],s=l[n],r=-1;e=d[++r];)1===e.nodeType&&(o||e[n]===s)&&(e[n]=i);l[n]=i}),a.constructor=Element,a.hasAttribute||(a.hasAttribute=function r(t){return null!==this.getAttribute(t)}),t()||(document.onreadystatechange=t,e=setInterval(t,25)),document.createElement=function u(t){var e=i(String(t).toLowerCase());return c(e)},document.removeChild(n)}else window.HTMLElement=window.Element}()}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{}),function(){var t;"document"in this&&"classList"in document.documentElement&&"Element"in this&&"classList"in Element.prototype&&((t=document.createElement("span")).classList.add("a","b"),t.classList.contains("b"))||function(t){var d=!0,u=function(t,e,n,o){Object.defineProperty?Object.defineProperty(t,e,{configurable:!1===d||!!o,get:n}):t.__defineGetter__(e,n)};try{u({},"support")}catch(e){d=!1}var h=function(t,l,c){u(t.prototype,l,function(){var t,e=this,n="__defineGetter__DEFINE_PROPERTY"+l;if(e[n])return t;if(!(e[n]=!0)===d){for(var o,i=h.mirror||document.createElement("div"),s=i.childNodes,r=s.length,a=0;a<r;++a)if(s[a]._R===e){o=s[a];break}o||(o=i.appendChild(document.createElement("div"))),t=DOMTokenList.call(o,e,c)}else t=new DOMTokenList(e,c);return u(e,l,function(){return t}),delete e[n],t},!0)};h(t.Element,"classList","className"),h(t.HTMLElement,"classList","className"),h(t.HTMLLinkElement,"relList","rel"),h(t.HTMLAnchorElement,"relList","rel"),h(t.HTMLAreaElement,"relList","rel")}(this)}.call("object"==typeof window&&window||"object"==typeof self&&self||"object"==typeof global&&global||{})}),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t,e){for(var n in this.$table=t,this.options={outOf:65,applyOnInit:!0,autoOutdent:!1,outdentAll:!1,chartVisibleText:"Change to table and accessible view",tableVisibleText:"Change to chart view",chartAlertText:"Chart visible",tableAlertText:"Table visible",toggleAfter:!1,returnReference:!1},e)this.options[n]=e[n]}e.prototype.init=function(){(this.detectIEVersion(),this.ENABLED=!(this.ie&&this.ie<8),this.$graphContainer=document.createElement("div"),this.$graphContainer.className="mc-chart-container",this.$graph=document.createElement("div"),this.$graph.setAttribute("aria-hidden","true"),this.$graph.setAttribute("class",this.$table.className),this.$graph.classList.add("mc-chart"),this.chartId=this.getChartId(),this.options.stacked=this.$table.classList.contains("mc-stacked"),this.options.stacked)&&(0===this.$table.querySelectorAll("thead th").length&&(this.ENABLED=!1));this.options.negative=this.$table.classList.contains("mc-negative");var t=2<this.$table.querySelectorAll("tbody tr")[0].querySelectorAll("th, td").length;if(this.options.multiple=!this.options.stacked&&(this.$table.classList.contains("mc-multiple")||t),this.options.autoOutdent=this.options.autoOutdent||this.$table.classList.contains("mc-auto-outdent"),this.options.outdentAll=this.options.outdentAll||this.$table.classList.contains("mc-outdented"),this.options.multiple&&this.$graph.classList.add("mc-multiple"),this.options.hasCaption=!!this.$table.querySelectorAll("caption").length,this.ENABLED&&(this.apply(),this.options.applyOnInit||this.toggleLink.click()),this.options.returnReference)return this},e.prototype.detectIEVersion=function(){this.ie=function(){for(var t,e=3,n=document.createElement("div"),o=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",e<10&&o[0];);return 4<e?e:t}()},e.prototype.apply=function(){if(this.ENABLED)try{this.constructChart(),this.addClassesToHeader(),this.applyWidths(),this.insert(),this.$table.classList.add("mc-hidden"),this.applyOutdent()}catch(t){console.error("MagnaCharta error:",t)}},e.prototype.construct={},e.prototype.construct.thead=function(){var t=document.createElement("div");t.classList.add("mc-thead");var e=document.createElement("div");e.classList.add("mc-tr");for(var n="",o=this.$table.querySelectorAll("thead th"),i=0;i<o.length;i++)n+='<div class="mc-th">',n+=o[i].innerHTML,n+="</div>";return e.innerHTML=n,t.appendChild(e),t},e.prototype.construct.tbody=function(){var t=document.createElement("div");t.classList.add("mc-tbody");for(var e=this.$table.querySelectorAll("tbody tr"),n=0;n<e.length;n++){var o=document.createElement("div");o.classList.add("mc-tr");for(var i="",s=e[n].querySelectorAll("th, td"),r=0;r<s.length;r++)i+='<div class="mc-td">',i+=s[r].innerHTML,i+="</div>";o.innerHTML=i,t.appendChild(o)}return t},e.prototype.construct.caption=function(){return this.$table.querySelector("caption").cloneNode(!0)},e.prototype.construct.toggleLink=function(t){var e=document.createElement("button"),n=document.createElement("span"),o=document.createElement("span");return n.classList.add("mc-toggle-text"),n.innerHTML=t,o.classList.add("govuk-visually-hidden","mc-toggle-status"),o.setAttribute("role","alert"),e.classList.add("govuk-body-s","mc-toggle-button"),e.appendChild(n),e.appendChild(o),e},e.prototype.addToggleClick=function(o,i,s,r){var a=this;this.toggleLink.addEventListener("click",function(t){t.preventDefault();var e=a.toggleLink.querySelector(".mc-toggle-text"),n=a.toggleLink.querySelector(".mc-toggle-status");a.$graphContainer.classList.toggle("mc-hidden"),a.$table.classList.toggle("mc-hidden"),e.innerHTML=e.innerHTML===i?o:i,n.innerHTML=n.innerHTML===r?s:r})},e.prototype.constructChart=function(){var t=this.construct.thead.call(this),e=this.construct.tbody.call(this);if(this.toggleLink=this.construct.toggleLink(this.options.chartVisibleText),this.addToggleClick(this.options.chartVisibleText,this.options.tableVisibleText,this.options.chartAlertText,this.options.tableAlertText),this.options.hasCaption){var n=this.construct.caption.call(this);this.$graph.appendChild(n)}this.options.toggleAfter?this.$table.insertAdjacentElement("afterend",this.toggleLink):this.$table.insertAdjacentElement("beforebegin",this.toggleLink),this.$graph.appendChild(t),this.$graph.appendChild(e)},e.prototype.utils={isFloat:function(t){return!isNaN(parseFloat(t))},stripValue:function(t){return t.replace(/,|\xa3|%|[a-z]/gi,"")},returnMax:function(t){for(var e=0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return e},isNegative:function(t){return t<0}},e.prototype.addClassesToHeader=function(){var t=this.$graph.querySelectorAll(".mc-th"),e=t.length;this.options.stacked&&(t[e-1].classList.add("mc-stacked-header","mc-header-total"),e-=1);for(var n=1;n<e;n++)t[n].classList.add("mc-key-header"),t[n].classList.contains("mc-stacked-header")||t[n].classList.add("mc-key-"+n)},e.prototype.calculateMaxWidth=function(){for(var t=[],e=0,n=this.$graph.querySelectorAll(".mc-tr"),o=0;o<n.length;o++){for(var i=n[o],s=i.querySelectorAll(".mc-td"),r=[],a=1;a<s.length;a++)r.push(s[a]);var l=r.length;if(l){this.options.stacked&&(r[l-1].classList.add("mc-stacked-total"),l-=1);var c=i.querySelector(".mc-td");c&&c.classList.add("mc-key-cell");for(var d=0,u=0;u<l;u++){var h=r[u];h.classList.add("mc-bar-cell"),h.classList.add("mc-bar-"+(u+1));var p=this.utils.stripValue(h.innerText);if(this.utils.isFloat(p)){var g=parseFloat(p,10),f=Math.abs(g);0===g&&h.classList.add("mc-bar-zero"),this.options.negative&&(this.utils.isNegative(g)?(h.classList.add("mc-bar-negative"),e<f&&(e=f)):h.classList.add("mc-bar-positive")),g=f,this.options.stacked?d+=g:(d=g,t.push(g))}}}this.options.stacked&&t.push(d)}var m={};return m.max=parseFloat(this.utils.returnMax(t),10),m.single=parseFloat(this.options.outOf/m.max,10),this.options.negative&&(m.marginLeft=parseFloat(e,10)*m.single,m.maxNegative=parseFloat(e,10)),m},e.prototype.applyWidths=function(){this.dimensions=this.calculateMaxWidth();for(var t=this.$graph.querySelectorAll(".mc-tr"),e=0;e<t.length;e++)for(var n=t[e].querySelectorAll(".mc-bar-cell"),o=0;o<n.length;o++){var i=n[o],s=parseFloat(this.utils.stripValue(i.innerText),10),r=s*this.dimensions.single,a=Math.abs(s),l=Math.abs(r);if(this.options.negative)if(i.classList.contains("mc-bar-positive"))i.style.marginLeft=this.dimensions.marginLeft+"%";else if(a<this.dimensions.maxNegative){var c=(this.dimensions.maxNegative-a)*this.dimensions.single;i.style.marginLeft=c+"%"}i.innerHTML="<span>"+i.innerHTML+"</span>",i.style.width=l+"%"}},e.prototype.insert=function(){var t=document.createElement("span"),e="mc-chart-not-accessible-"+this.chartId;t.innerHTML="This content is not accessible - switch to table",t.className="mc-hidden",t.id=e,this.$graphContainer.setAttribute("aria-labelledby",e),this.$graphContainer.appendChild(this.$graph),this.$graphContainer.appendChild(t),this.$table.insertAdjacentElement("afterend",this.$graphContainer)},e.prototype.applyOutdent=function(){for(var t=this.$graph.querySelectorAll(".mc-bar-cell"),e=0;e<t.length;e++){var n=t[e],o=parseFloat(this.utils.stripValue(n.innerText),10),i=n.querySelector("span"),s=n.querySelector("span").offsetWidth+5,r=n.offsetWidth;this.options.stacked?(r<s&&0<o||o<1)&&n.classList.add("mc-value-overflow"):(0===o&&n.classList.add("mc-bar-outdented"),this.options.autoOutdent&&r<=s||this.options.outdentAll?(n.classList.add("mc-bar-outdented"),i.style.marginLeft="100%",i.style.display="inline-block"):n.classList.add("mc-bar-indented"))}},e.prototype.getChartId=function(){for(var t=document.querySelectorAll("table.js-barchart-table"),e=null,n=0;n<t.length;n++)t[n]===this.$table&&(e=n);return e},t.MagnaCharta=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},function(r){"use strict";var t=function(t){this.$element=t};t.prototype.init=function(){for(var t=this.$element.querySelectorAll(".js-barchart-table"),e=[],n=0;n<t.length;n++){var o=t[n].className;-1===o.indexOf("mc-chart")&&-1===o.indexOf("js-barchart-table-init")&&e.push(t[n])}for(var i=0;i<e.length;i++){var s=e[i];new r.Modules.MagnaCharta(s,{toggleText:"Change between chart and table"}).init(),s.className=s.className+" js-barchart-table-init"}},r.GovspeakBarchartEnhancement=t}(window.GOVUK),function(){"use strict";window.GOVUK=window.GOVUK||{};var t=window.GOVUK||{},l=function(t){this.$element=t};l.prototype.init=function(){if(!this.campaignCookiesAllowed())return this.startModule=this.startModule.bind(this),void window.addEventListener("cookie-consent",this.startModule);this.startModule()},l.prototype.startModule=function(){window.removeEventListener("cookie-consent",this.startModule);var t=this.$element.querySelectorAll('a[href*="youtube.com"], a[href*="youtu.be"]');0<t.length&&l.insertApiScript();for(var e=0;e<t.length;++e){var n=t[e],o=n.getAttribute("href"),i=n.hasAttribute("data-youtube-player-analytics"),s={link:n};if(i&&(s.tracking={hasTracking:i,category:n.getAttribute("data-youtube-player-analytics-category")}),0<=o.indexOf("/live_stream")){var r=l.parseLivestream(o);!this.hasDisabledEmbed(n)&&r&&(s.channel=r,this.setupVideo(s))}else{var a=l.parseVideoId(o);!this.hasDisabledEmbed(n)&&a&&(s.videoId=a,this.setupVideo(s))}}},l.prototype.hasDisabledEmbed=function(t){return"off"===t.getAttribute("data-youtube-player")},l.prototype.setupVideo=function(t){var e=l.nextId(),n=t.link,o=t.videoId?t.videoId:t.channel,i=n.parentNode,s=i.parentNode,r=document.createElement("div");r.className+="gem-c-govspeak__youtube-video",r.innerHTML='<span id="'+e+'" data-video-id="'+o+'"></span>',t.title=n.textContent,s.replaceChild(r,i),this.insertVideo(e,t)},l.prototype.insertVideo=function(t,s){var e="",n="";s.channel?(e=s.channel,n="live_stream"):n=s.videoId;var o=function(){new window.YT.Player(t,{videoId:n,host:"https://www.youtube-nocookie.com",playerVars:{enablejsapi:1,origin:window.location.origin,rel:0,disablekb:1,modestbranding:1,channel:e},events:{onReady:function(t){var e=s.title;t.target.getIframe().title=e+" (video)"},onStateChange:function(t){var e=t.data,n=t.target,o={"-1":"VideoUnstarted",0:"VideoEnded",1:"VideoPlaying",2:"VideoPaused",3:"VideoBuffering",5:"VideoCued"};if(o[e]&&s.tracking&&s.tracking.hasTracking&&window.GOVUK.analytics&&window.GOVUK.analytics.trackEvent){var i={category:s.tracking.category,action:o[e],label:{transport:"beacon",label:n.getVideoData&&n.getVideoData().title}};window.GOVUK.analytics.trackEvent(i.category,i.action,i.label)}}}})};o=o.bind(this),l.playerApiReady?o.call():l.queuedInserts.push(o)},l.prototype.campaignCookiesAllowed=function(){var t=window.GOVUK.getConsentCookie();return null===t||t.campaigns},l.nextId=function(){return this.embedCount=this.embedCount||0,this.embedCount+=1,"youtube-"+this.embedCount},l.insertApiScript=function(){if(!this.apiScriptInserted){var t=document.createElement("script");t.src="https://www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),this.apiScriptInserted=!0}},l.parseLivestream=function(t){var e=t.match(/channel=([^&]*)/);if(e)return e[1]},l.parseVideoId=function(t){var e;if(-1<t.indexOf("youtube.com")){var n={};if(1===(e=t.split("?")).length)return;e=e[1].split("&");for(var o=0;o<e.length;o++){var i=e[o].split("=");n[i[0]]=i[1]}return n.v}if(-1<t.indexOf("youtu.be"))return(e=t.split("/")).pop()},l.apiScriptInserted=!1,l.playerApiReady=!1,l.queuedInserts=[],window.onYouTubePlayerAPIReady=function(){l.playerApiReady=!0;for(var t=0;t<l.queuedInserts.length;t++)l.queuedInserts[t].call()},t.GovspeakYoutubeLinkEnhancement=l}(),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.focus()},t.InitialFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.toggleTarget=this.$module.querySelector(".js-class-toggle"),this.$module.addFocusClass=this.addFocusClass.bind(this),this.$module.removeFocusClassFromEmptyInput=this.removeFocusClassFromEmptyInput.bind(this),this.inputIsEmpty()||this.addFocusClass(),this.toggleTarget.addEventListener("focus",this.$module.addFocusClass),this.toggleTarget.addEventListener("blur",this.$module.removeFocusClassFromEmptyInput)},e.prototype.inputIsEmpty=function(){return""===this.toggleTarget.value},e.prototype.addFocusClass=function(){this.toggleTarget.classList.add("focus")},e.prototype.removeFocusClassFromEmptyInput=function(){this.inputIsEmpty()&&this.toggleTarget.classList.remove("focus")},t.GemToggleInputClassOnFocus=e}(window.GOVUK.Modules),window.GOVUK=window.GOVUK||{},window.GOVUK.Modules=window.GOVUK.Modules||{},function(t){function e(t){this.$module=t}e.prototype.init=function(){this.$module.toggleTrigger=this.$module.querySelector("[data-controls][data-expanded]"),this.$module.toggleTrigger&&(this.$module.toggleClass=this.$module.getAttribute("data-toggle-class")||"js-hidden",this.$module.isTrackable=this.$module.toggleTrigger.hasAttribute("data-track-category")&&this.$module.toggleTrigger.hasAttribute("data-track-action"),this.$module.isTrackable&&(this.$module.trackCategory=this.$module.toggleTrigger.getAttribute("data-track-category"),this.$module.trackAction=this.$module.toggleTrigger.getAttribute("data-track-action")),this.addAriaAttrs(),this.toggleOnClick())},e.prototype.addAriaAttrs=function(){this.$module.toggleTrigger.setAttribute("role","button"),this.$module.toggleTrigger.setAttribute("aria-controls",this.$module.toggleTrigger.getAttribute("data-controls")),this.$module.toggleTrigger.setAttribute("aria-expanded",this.$module.toggleTrigger.getAttribute("data-expanded")),this.$module.targets=this.getTargetElements();for(var t=0;t<this.$module.targets.length;t++)this.$module.targets[t].setAttribute("aria-live","polite"),this.$module.targets[t].setAttribute("role","region")},e.prototype.getTargetElements=function(){var t="#"+this.$module.toggleTrigger.getAttribute("aria-controls").split(" ").join(", #");return this.$module.querySelectorAll(t)},e.prototype.toggleOnClick=function(){var i=this;this.$module.toggleTrigger.addEventListener("click",function(t){if(t.preventDefault(),"true"===this.getAttribute("aria-expanded")){this.setAttribute("aria-expanded",!1);for(var e=0;e<i.$module.targets.length;e++)i.$module.targets[e].classList.add(i.$module.toggleClass)}else{this.setAttribute("aria-expanded",!0);for(var n=0;n<i.$module.targets.length;n++)i.$module.targets[n].classList.remove(i.$module.toggleClass)}var o=this.getAttribute("data-toggled-text");"string"==typeof o&&(this.setAttribute("data-toggled-text",this.innerText),this.innerText=o),window.GOVUK.analytics&&window.GOVUK.analytics.trackEvent&&i.$module.isTrackable&&i.track()})},e.prototype.track=function(){var t={label:this.$module.toggleTrigger.getAttribute("data-toggled-text")||this.$module.toggleTrigger.innerText};window.GOVUK.analytics.trackEvent(this.$module.trackCategory,this.$module.trackAction,t)},t.GemToggle=e}(window.GOVUK.Modules),function(){"use strict";window.GOVUK=window.GOVUK||{},window.GOVUK.triggerEvent=function(t,e,n){var o,i=n||{},s=i.keyCode;Object.prototype.hasOwnProperty.call(i,"bubbles")||(i.bubbles=!0),Object.prototype.hasOwnProperty.call(i,"cancelable")||(i.cancelable=!0),"function"==typeof window.CustomEvent?o=new window.CustomEvent(e,i):(o=document.createEvent("CustomEvent")).initCustomEvent(e,i.bubbles,i.cancelable,i.detail),s&&(o.keyCode=s),t.dispatchEvent(o)}}(window);